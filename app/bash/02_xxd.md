# xxd

ファイルを 16進数等でダンプするコマンド。

標準状態での出力は、左から順に アドレス 16進数値 ASCIIコード となっている。  
ところで、ASCIIコードの部分に日本語を表示しようと頑張ったけど駄目だった。やっぱダメですよね。

## オプション

    -u      # 16進数を大文字で表示する
    -g [n]  # バイト数を指定した値でグループ化して表示する。デフォルトは 2 byte
    -e      # バイトオーダーをリトルエンディアンで表示
    -p      # プレーンな16進数ダンプを表示
    -r      # 作成したダンプを元に戻す。

## 使い方

    $ xxd [fileName]        # ファイルを指定して開く
                            # 基本的に出力は長大なので、標準出力に未加工で出さないか

    $ echo test | xxd       # 標準出力を受け取ってダンプする

---
### ダンプを作成して元に戻す

    $ xxd [fileName] dumpfile   # [fileName] を 16進数ダンプしたものが dumfile
    $ xxd -r dumpfile newfile   # -r を使うと、ダンプしたファイルを元に戻せる

### ダンプファイルを編集するとどうなるか

上記ように作成したダンプファイルをテキストエディタ等で開き、編集する。

値を書き換えることは勿論可能。ありえない値(a-f 以外のアルファベット等)を書き込んだ場合は未検証。

行を丸ごと削除した場合は全て `0` で埋められる。横の列がアドレスになっているためそれで整合性が取られる。

### プレーンなダンプファイルから復元する

    xxd -p test.txt > pdump

上記のようなコマンドを使用すると、プレーンな 16 進数ダンプが得られる。

    # プレーンなダンプファイルの一例
    55736167653a20636174205b4f5054494f4e5d2e2e2e205b46494c455d2e
    2e2e0a436f6e636174656e6174652046494c4528732920746f207374616e

    xxd -r -p pdump newfile     # -p を付ければ上記のダンプからファイルを復元可能。

ただしプレーンダンプは少し見にくいし扱いにくい（普通扱わない気もするけど）。そこで通常の出力を加工して使ってみる。


    xxd test.txt | cut -d ' ' -f 2-10 > dumpfile

    # 上記コマンドで得られるダンプファイルはこのような書式
    5573 6167 653a 2063 6174 205b 4f50 5449 
    4f4e 5d2e 2e2e 205b 4649 4c45 5d2e 2e2e 

デフォルト書式のダンプファイルを吐かせ、`cut` を使って 16進数値の部分のみを抽出。  

数値 4つごとに半角スペースが入っていたり、改行箇所も上記と違っているが `-r -p` を指定すれば問題なく復元可能。

    xxd -r -p dump newfile
