# MySQL

## root のパスワードを忘れた

手っ取り早いのは `XAMPP` を丸ごと再インストール。今回はやってないけど多分直る。

## MySQL だけ直す

再インストールしたくない場合は設定ファイルを弄る。以下 `mysql.exe` にパスが通っている前提で書く。

    $ mysql -u root     # まずはパスワード無しでのログインを試す

これで弾かれた場合はパスワードがかかっているので更に進める。  
まずは `MySQL` をコンパネから停止する。

次に `XAMPP` のコンパネの `MySQL` の右側の `Config` ボタンを押下。

コンテキストメニューが出るので、そこに表示されている `my.ini` または `my.cnf` をクリック。  
OS 等にファイル名に違いが出る？ どれも同じ設定ファイルを指していると思われる。

エディタが起動するので、まずは下記を検索する。※大括弧もキーワードに含む。

    [mysqld]

キーワードを見つけたら直後の行にキーワードを追加する。

    skip-grant-tables

ファイルを保存したら `MySQL` を再起動する。

    $ mysql -u root     # パスワード無しでログインできる……はず

ログインできたらコマンドを入力する。

    > use mysql
    flush privileges;

セミコロンまで打ってコマンドを確定。  
プロンプト部分に `mysql` が表示されているのを確認できたら引き続き入力する。

    ALTER USER 'root'@'localhost' IDENTIFIED BY 'new_password';

コマンドは全て大文字になっているが、シングルクオートで囲まれている部分は小文字でも可だった。  
上記コマンドが実行されると `new_password` が新しいパスワードに設定される。

これでパスワードの再設定は完了したので、`MySQL` を停止し、先程と同じように設定ファイルを開く。  
設定ファイルから、先程追加した `skip-grant-tables` の行を削除。  
`MySQL` を再起動する。

    mysql -u root -p    # パスワードつきでログインを行う

パスワードを聞かれるので、先程設定したパスを入力してログインできれば OK

お疲れ様でした。

### 結論

試しにやってみたけど、特に理由が無ければ全部再インストールした方が絶対早い。
